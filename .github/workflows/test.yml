on:
  push:
    branches:
      - main 

jobs:
  request:
    name: Dispatch Khora-Berlin build action
    runs-on: ubuntu-latest
    steps:
      - name: Dispatxh test
        run: curl \
             -X POST \
             -H "Accept: application/vnd.github.v3+json" \
              https://api.github.com/repos/khora-berlin/khora-berlin.github.io/dispatches \
             -d '{"event_type":"build"}'
      - name: Make a HTTP Request
        uses: actionsflow/axios@v1
        with:
          url: https://api.github.com/repos/khora-berlin/khora-berlin.github.io/dispatches
          method: POST
          headers: '{ "Authorization": "token ${{secrets.PAT_TOKEN}}",  "Accept": "application/vnd.github.v3+json"}'
          data: '{"event_type": "build", "client_payload": { "version": "1.2.3"}}'
          body: '{}'
